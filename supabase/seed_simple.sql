-- Simple seed data without complex procedural code

-- Generate sample price data for AAPL (last 30 days)
INSERT INTO prices_daily (security_id, d, open, high, low, close, volume) VALUES
  ('660e8400-e29b-41d4-a716-446655440000', '2024-07-25', 150.00, 152.50, 148.75, 151.20, 45000000),
  ('660e8400-e29b-41d4-a716-446655440000', '2024-07-26', 151.20, 153.80, 150.90, 152.45, 38000000),
  ('660e8400-e29b-41d4-a716-446655440000', '2024-07-29', 152.45, 154.20, 151.30, 153.80, 42000000),
  ('660e8400-e29b-41d4-a716-446655440000', '2024-07-30', 153.80, 155.60, 152.40, 154.90, 39000000),
  ('660e8400-e29b-41d4-a716-446655440000', '2024-07-31', 154.90, 157.20, 153.80, 156.30, 44000000),
  ('660e8400-e29b-41d4-a716-446655440000', '2024-08-01', 156.30, 158.90, 155.20, 157.80, 41000000),
  ('660e8400-e29b-41d4-a716-446655440000', '2024-08-02', 157.80, 159.40, 156.60, 158.20, 37000000),
  ('660e8400-e29b-41d4-a716-446655440000', '2024-08-05', 158.20, 160.80, 157.10, 159.60, 43000000),
  ('660e8400-e29b-41d4-a716-446655440000', '2024-08-06', 159.60, 161.20, 158.40, 160.80, 40000000),
  ('660e8400-e29b-41d4-a716-446655440000', '2024-08-07', 160.80, 162.50, 159.70, 161.90, 38000000),
  ('660e8400-e29b-41d4-a716-446655440000', '2024-08-08', 161.90, 163.80, 160.50, 162.40, 45000000),
  ('660e8400-e29b-41d4-a716-446655440000', '2024-08-09', 162.40, 164.20, 161.30, 163.70, 42000000),
  ('660e8400-e29b-41d4-a716-446655440000', '2024-08-12', 163.70, 165.90, 162.80, 164.50, 39000000),
  ('660e8400-e29b-41d4-a716-446655440000', '2024-08-13', 164.50, 166.30, 163.40, 165.80, 41000000),
  ('660e8400-e29b-41d4-a716-446655440000', '2024-08-14', 165.80, 167.60, 164.70, 166.20, 44000000),
  ('660e8400-e29b-41d4-a716-446655440000', '2024-08-15', 166.20, 168.40, 165.10, 167.50, 46000000),
  ('660e8400-e29b-41d4-a716-446655440000', '2024-08-16', 167.50, 169.80, 166.30, 168.90, 43000000),
  ('660e8400-e29b-41d4-a716-446655440000', '2024-08-19', 168.90, 171.20, 167.80, 170.40, 47000000),
  ('660e8400-e29b-41d4-a716-446655440000', '2024-08-20', 170.40, 172.60, 169.30, 171.80, 45000000),
  ('660e8400-e29b-41d4-a716-446655440000', '2024-08-21', 171.80, 174.20, 170.60, 173.50, 48000000),
  ('660e8400-e29b-41d4-a716-446655440000', '2024-08-22', 173.50, 175.90, 172.40, 174.80, 44000000),
  ('660e8400-e29b-41d4-a716-446655440000', '2024-08-23', 174.80, 177.30, 173.60, 176.20, 49000000);

-- Generate sample price data for MSFT (last 30 days)
INSERT INTO prices_daily (security_id, d, open, high, low, close, volume) VALUES
  ('660e8400-e29b-41d4-a716-446655440001', '2024-07-25', 300.00, 305.20, 298.50, 302.80, 25000000),
  ('660e8400-e29b-41d4-a716-446655440001', '2024-07-26', 302.80, 308.40, 301.60, 306.20, 23000000),
  ('660e8400-e29b-41d4-a716-446655440001', '2024-07-29', 306.20, 311.80, 304.90, 309.50, 27000000),
  ('660e8400-e29b-41d4-a716-446655440001', '2024-07-30', 309.50, 314.20, 307.80, 312.40, 24000000),
  ('660e8400-e29b-41d4-a716-446655440001', '2024-07-31', 312.40, 317.60, 310.20, 315.80, 28000000),
  ('660e8400-e29b-41d4-a716-446655440001', '2024-08-01', 315.80, 320.40, 313.50, 318.90, 26000000),
  ('660e8400-e29b-41d4-a716-446655440001', '2024-08-02', 318.90, 323.80, 316.70, 321.20, 25000000),
  ('660e8400-e29b-41d4-a716-446655440001', '2024-08-05', 321.20, 326.50, 319.40, 324.80, 29000000),
  ('660e8400-e29b-41d4-a716-446655440001', '2024-08-06', 324.80, 329.20, 322.60, 327.40, 27000000),
  ('660e8400-e29b-41d4-a716-446655440001', '2024-08-07', 327.40, 332.80, 325.10, 330.60, 26000000),
  ('660e8400-e29b-41d4-a716-446655440001', '2024-08-08', 330.60, 335.40, 328.30, 333.80, 30000000),
  ('660e8400-e29b-41d4-a716-446655440001', '2024-08-09', 333.80, 338.60, 331.50, 336.20, 28000000),
  ('660e8400-e29b-41d4-a716-446655440001', '2024-08-12', 336.20, 341.80, 334.10, 339.50, 27000000),
  ('660e8400-e29b-41d4-a716-446655440001', '2024-08-13', 339.50, 344.20, 337.30, 342.80, 29000000),
  ('660e8400-e29b-41d4-a716-446655440001', '2024-08-14', 342.80, 347.60, 340.50, 345.90, 31000000),
  ('660e8400-e29b-41d4-a716-446655440001', '2024-08-15', 345.90, 350.80, 343.70, 348.40, 30000000),
  ('660e8400-e29b-41d4-a716-446655440001', '2024-08-16', 348.40, 353.20, 346.10, 351.70, 28000000),
  ('660e8400-e29b-41d4-a716-446655440001', '2024-08-19', 351.70, 356.90, 349.40, 354.80, 32000000),
  ('660e8400-e29b-41d4-a716-446655440001', '2024-08-20', 354.80, 359.60, 352.50, 357.20, 31000000),
  ('660e8400-e29b-41d4-a716-446655440001', '2024-08-21', 357.20, 362.40, 355.10, 360.80, 33000000),
  ('660e8400-e29b-41d4-a716-446655440001', '2024-08-22', 360.80, 365.20, 358.60, 363.40, 29000000),
  ('660e8400-e29b-41d4-a716-446655440001', '2024-08-23', 363.40, 368.80, 361.20, 366.90, 34000000);

-- Insert sample quarterly fundamentals for 2023-2024
INSERT INTO fundamentals_quarterly (
  company_id, fiscal_year, fiscal_period, report_date,
  revenue, gross_profit, operating_income, net_income,
  shares_diluted, eps_basic, eps_diluted,
  cash_from_operations, capex, total_assets, total_liabilities, shareholder_equity
) VALUES
  -- AAPL 2023
  ('550e8400-e29b-41d4-a716-446655440000', 2023, 'Q1', '2023-03-15', 94836000000, 43818000000, 30288000000, 24160000000, 15728000000, 1.52, 1.52, 28564000000, 2945000000, 346747000000, 290437000000, 56310000000),
  ('550e8400-e29b-41d4-a716-446655440000', 2023, 'Q2', '2023-06-15', 81797000000, 35325000000, 22999000000, 19881000000, 15697000000, 1.26, 1.26, 26777000000, 2132000000, 335038000000, 279414000000, 55624000000),
  ('550e8400-e29b-41d4-a716-446655440000', 2023, 'Q3', '2023-09-15', 89498000000, 40439000000, 26321000000, 22956000000, 15550000000, 1.46, 1.46, 29513000000, 2407000000, 352755000000, 293706000000, 59049000000),
  ('550e8400-e29b-41d4-a716-446655440000', 2023, 'Q4', '2023-12-15', 119575000000, 54731000000, 40437000000, 33916000000, 15334000000, 2.18, 2.18, 37347000000, 3447000000, 385695000000, 324618000000, 61077000000),
  
  -- AAPL 2024
  ('550e8400-e29b-41d4-a716-446655440000', 2024, 'Q1', '2024-03-15', 90753000000, 41863000000, 27421000000, 23636000000, 15334000000, 1.53, 1.53, 28748000000, 2891000000, 365725000000, 308028000000, 57697000000),
  ('550e8400-e29b-41d4-a716-446655440000', 2024, 'Q2', '2024-06-15', 85777000000, 38291000000, 25336000000, 21448000000, 15204000000, 1.40, 1.40, 29963000000, 2077000000, 364980000000, 308193000000, 56787000000),
  
  -- MSFT 2023
  ('550e8400-e29b-41d4-a716-446655440001', 2023, 'Q1', '2023-03-15', 52857000000, 36016000000, 20403000000, 16425000000, 7472000000, 2.20, 2.20, 23200000000, 7755000000, 411976000000, 205753000000, 206223000000),
  ('550e8400-e29b-41d4-a716-446655440001', 2023, 'Q2', '2023-06-15', 56189000000, 38441000000, 22563000000, 20081000000, 7464000000, 2.69, 2.69, 28746000000, 7712000000, 411956000000, 198298000000, 213658000000),
  ('550e8400-e29b-41d4-a716-446655440001', 2023, 'Q3', '2023-09-15', 56517000000, 38652000000, 22320000000, 22291000000, 7430000000, 3.00, 3.00, 28090000000, 8447000000, 430888000000, 205435000000, 225453000000),
  ('550e8400-e29b-41d4-a716-446655440001', 2023, 'Q4', '2023-12-15', 62020000000, 42887000000, 27031000000, 22687000000, 7420000000, 3.06, 3.06, 33051000000, 8705000000, 484275000000, 238203000000, 246072000000),
  
  -- MSFT 2024
  ('550e8400-e29b-41d4-a716-446655440001', 2024, 'Q1', '2024-03-15', 61858000000, 42849000000, 26984000000, 21939000000, 7411000000, 2.94, 2.94, 28090000000, 9327000000, 512442000000, 257406000000, 255036000000),
  ('550e8400-e29b-41d4-a716-446655440001', 2024, 'Q2', '2024-06-15', 64728000000, 45012000000, 27927000000, 22036000000, 7395000000, 2.95, 2.95, 31881000000, 9327000000, 527900000000, 263020000000, 264880000000);

-- Insert sample KPI values for P/E ratios
INSERT INTO kpi_values (company_id, kpi_id, ts, value, confidence, source) VALUES
  -- AAPL P/E ratios for last few months
  ('550e8400-e29b-41d4-a716-446655440000', 1, '2024-06-01', 28.5, 0.95, 'calculated'),
  ('550e8400-e29b-41d4-a716-446655440000', 1, '2024-07-01', 29.2, 0.95, 'calculated'),
  ('550e8400-e29b-41d4-a716-446655440000', 1, '2024-08-01', 30.1, 0.95, 'calculated'),
  
  -- MSFT P/E ratios for last few months
  ('550e8400-e29b-41d4-a716-446655440001', 1, '2024-06-01', 32.8, 0.95, 'calculated'),
  ('550e8400-e29b-41d4-a716-446655440001', 1, '2024-07-01', 33.4, 0.95, 'calculated'),
  ('550e8400-e29b-41d4-a716-446655440001', 1, '2024-08-01', 34.2, 0.95, 'calculated');
